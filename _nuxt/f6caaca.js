(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1543:function(t,e,n){"use strict";n.r(e);n(52),n(37),n(25),n(14),n(39),n(54),n(88);var c=n(22),r=n(5),o=n(134),l=n(1503);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m=new(n.n(l).a)({name:"DashPay:Dapp",target:"DashPay:content"}),_={components:{},data:function(){return{connectedState:"disconnected",broadcastState:null,message:"",accountDPNS:null,steps:["Connect to Dash Platform","Fetch Documents"],currentStep:0,docId:"",docs:[],error:null}},computed:v({},Object(o.c)(["getDocumentById","getMyUsername","getUsernameByOwnerId"])),mounted:function(){var t=this;m.on("data",function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(data){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(data),e.t0=data.name,e.next="onConnect"===e.t0?4:"onBroadcastDocument"===e.t0?6:17;break;case 4:return data.payload&&(t.accountDPNS=data.payload,t.connectedState="connected"),e.abrupt("break",18);case 6:if(!data.payload){e.next=16;break}return console.log("onBroadcastDocument",data.payload),t.docId=data.payload.transitions[0].$id,e.t1=t.docs,e.next=12,t.fetchDocumentById({typeLocator:"example.example",docId:t.docId});case 12:e.t2=e.sent,e.t1.unshift.call(e.t1,e.t2),console.log(data.payload.transitions[0],"text ".concat(data.payload.transitions[0])),t.broadcastState="sent";case 16:case 17:return e.abrupt("break",18);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},created:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.isClientReady();case 3:return++t.currentStep,e.next=6,t.fetchDocuments({typeLocator:"example.example",queryOpts:{limit:5,orderBy:[["$createdAt","desc"]]}});case 6:t.docs=e.sent,++t.currentStep,t.showSnackbar({text:"Success!",color:"green"}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),t.error=e.t0.message;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))()},methods:v(v({},Object(o.b)(["isClientReady","submitDocument","fetchDocuments","fetchDocumentById","showSnackbar"])),{},{sendMessage:function(){this.broadcastState="sending";var t="".concat("7y6p6RUpzk9PTj77DBQXr2CaC1gLgFKYhiE3W3Sgo3T1",".example"),e={message:this.message};m.write({name:"broadcastDocument",payload:{typeLocator:t,document:e}})},DashConnect:function(){this.connectedState="connecting",m.write({name:"connect",payload:null})}})},y=n(117),f=n(160),h=n.n(f),S=n(1484),D=n(1493),w=n(1489),O=n(1539),x=n(1497),C=n(1498),k=n(1490),I=n(1488),P=n(1502),j=n(1492),V=n(337),B=n(1540),L=n(1541),R=n(1542),component=Object(y.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",[n("v-col",{staticClass:"mx-auto",attrs:{cols:"10"}},[t.error?n("v-card",[n("v-card-title",[t._v("\n        "+t._s(t.error)+"\n      ")])],1):t._e(),t._v(" "),n("v-card",{staticClass:"mb-10"},[n("v-card-text",{staticClass:"mb-0 pb-0"},[t._v("Dash User ")]),t._v(" "),n("v-card-title",[t._v(t._s(t.accountDPNS?t.accountDPNS.label:t.connectedState))]),t._v(" "),n("v-card-actions",[n("v-btn",{attrs:{color:"primary"},on:{click:t.DashConnect}},[t._v("connect wallet")])],1)],1),t._v(" "),n("v-card",{staticClass:"mb-10"},[n("v-card-text",{staticClass:"mb-0 pb-0"},[t._v("Write a message")]),t._v(" "),n("v-text-field",{model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),t._v(" "),n("v-card-actions",[n("v-btn",{attrs:{disabled:!t.accountDPNS,loading:"sending"===t.broadcastState,color:"secondary"},on:{click:t.sendMessage}},[t._v("Send Message")])],1)],1),t._v(" "),n("v-card",{staticClass:"mb-10"},[n("v-list",{attrs:{dense:""}},[n("v-subheader",[t._v("Status")]),t._v(" "),n("v-list-item-group",{attrs:{color:"primary"}},[t._l(t.steps,(function(e,c){return n("v-list-item",{key:c},[t.currentStep===c?n("v-list-item-icon",[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary",size:"16",width:"2"}})],1):t.currentStep<c?n("v-list-item-icon",[n("v-icon",[t._v("mdi-clock-outline")])],1):t.currentStep>c?n("v-list-item-icon",[n("v-icon",{attrs:{color:"green"}},[t._v("mdi-check-bold")])],1):t._e(),t._v(" "),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e)}})],1)],1)})),t._v(" "),n("v-list-item",["connecting"===t.connectedState?n("v-list-item-icon",[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary",size:"16",width:"2"}})],1):"disconnected"===t.connectedState?n("v-list-item-icon",[n("v-icon",[t._v("mdi-clock-outline")])],1):"connected"===t.connectedState?n("v-list-item-icon",[n("v-icon",{attrs:{color:"green"}},[t._v("mdi-check-bold")])],1):t._e(),t._v(" "),n("v-list-item-content",[n("v-list-item-title",[t._v("Connect Wallet")])],1)],1),t._v(" "),n("v-list-item",["sending"===t.broadcastState?n("v-list-item-icon",[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary",size:"16",width:"2"}})],1):null===t.broadcastState?n("v-list-item-icon",[n("v-icon",[t._v("mdi-clock-outline")])],1):"sent"===t.broadcastState?n("v-list-item-icon",[n("v-icon",{attrs:{color:"green"}},[t._v("mdi-check-bold")])],1):t._e(),t._v(" "),n("v-list-item-content",[n("v-list-item-title",[t._v("Submit Document")])],1)],1)],2)],1)],1),t._v(" "),n("v-card",{staticClass:"mb-10"},[n("v-card-title",[t._v(" Documents fetched from dpp: ")]),t._v(" "),t._l(t.docs,(function(e,c){return n("v-card",{key:c},[n("v-card-text",{staticClass:"mb-0 pb-0"},[t._v(t._s(t.getUsernameByOwnerId(e.$ownerId))+"\n        ")]),t._v(" "),n("v-card-title",[t._v(t._s(e.message))])],1)}))],2),t._v(" "),n("v-card",[n("v-card-title",[t._v(" Document read from cache: ")]),t._v(" "),n("pre",[t._v("      "+t._s(JSON.stringify(t.getDocumentById(t.docId),null," "))+"\n    ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;h()(component,{VBtn:S.a,VCard:D.a,VCardActions:w.a,VCardText:w.b,VCardTitle:w.c,VCol:O.a,VIcon:x.a,VList:C.a,VListItem:k.a,VListItemContent:I.a,VListItemGroup:P.a,VListItemIcon:j.a,VListItemTitle:I.b,VProgressCircular:V.a,VRow:B.a,VSubheader:L.a,VTextField:R.a})}}]);